<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
	<script>
		function loadImage(src, resolve, reject) {
			let image = new Image();
			image.src = src;
			image.onload = function() {
				resolve(image);
			}
			image.onerror = reject();
		}
		loadImage("./images/pro.png", (image) => {
			document.body.appendChild(image);
			console.log("加载完成");
		}, (err) => {
			console.log("加载失败");
		});
		console.log("先打印");
		// promise方式
		function loadImgByPromise(src) {
			return new Promise((resolve, reject) => {
				let image = new Image();
				image.src = src;
				image.onload = () => {
					resolve(image);
					document.body.appendChild(image);
				}
				image.onerror = reject;
			})
		}
		loadImgByPromise("./images/pro.png").then(image => {
			// image.style.opacity = .8;
		}).catch(err => {
			console.log(err);
		})
	</script>
</html>
